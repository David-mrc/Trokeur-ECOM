<div class="card shadow border-warning mb-4" style="max-width: 25rem">
  <div *ngIf="imageUrl | async as safeImageUrl; else loadingImage">
    <img [src]="safeImageUrl" class="card-img-top" alt="Image du produit" (click)="openCarousel(carousel)" />
  </div>

  <ng-template #loadingImage>
    <div>Loading image...</div>
  </ng-template>

  <div class="card-header my-4" [routerLink]="['/trade-object/', tradeObject?.id, 'view']" routerLinkActive="router-link-active">
    <h6 class="card-title text-truncate" style="max-width: 90%">{{ tradeObject?.name }}</h6>
    <jhi-state [state]="tradeObject ? (tradeObject.state ? tradeObject.state : '') : ''" />
  </div>
  <button *ngIf="isPublic" class="btn btn-warning w-50 mx-auto mb-2" type="submit">
    <fa-icon icon="handshake" style="color: #000000"></fa-icon>
    <span class="icon-text" style="margin-left: 4px">Troker</span>
  </button>
  <div *ngIf="!isPublic" class="privateActions mb-2">
    <button
      class="btn btn-warning w-30 mx-auto"
      type="submit"
      [routerLink]="['/trade-object/', tradeObject?.id, 'view']"
      routerLinkActive="router-link-active"
    >
      <fa-icon icon="eye" style="color: #000000"></fa-icon>
      <span class="icon-text" style="margin-left: 4px">Voir</span>
    </button>
    <button class="btn btn-warning w-30 mx-auto" type="submit">
      <fa-icon icon="pencil-alt" style="color: #000000"></fa-icon>
      <span class="icon-text" style="margin-left: 4px">Modifier</span>
    </button>
  </div>
</div>

<ng-template #carousel>
  <div class="modal-body">
    <button type="button" class="close close-button" aria-label="Close" (click)="closeModal()">
      <span aria-hidden="true">&times;</span>
    </button>
    <ngb-carousel style="display: block">
      <ng-template *ngFor="let imageUrl of urlArray" ngbSlide>
        <div class="picsum-img-wrapper">
          <img [src]="imageUrl | async" alt="Random first slide" style="width: 100%; object-fit: contain; height: 25rem" />
        </div>
      </ng-template>
    </ngb-carousel>
  </div>
</ng-template>
